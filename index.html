<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>StriveCore AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
      background: #000;
      color: #fff;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      background: #000;
      color: #fff;
      padding: 14px;
      text-align: center;
      font-weight: 700;
      position: relative;
      border-bottom: 1px solid #222;
    }
    #emergency {
      position: absolute;
      right: 12px;
      top: 10px;
      background: red;
      color: #fff;
      border: none;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }
    #chat {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .message {
      max-width: 80%;
      padding: 12px 14px;
      border-radius: 14px;
      line-height: 1.4;
      font-size: 15px;
      word-wrap: break-word;
    }
    .user {
      align-self: flex-end;
      background: #fff;
      color: #000;
    }
    .ai {
      align-self: flex-start;
      background: #111;
      color: #fff;
    }
    footer {
      display: flex;
      gap: 8px;
      padding: 10px;
      border-top: 1px solid #222;
      background: #000;
    }
    input {
      flex: 1;
      padding: 12px 14px;
      border-radius: 20px;
      border: 1px solid #444;
      background: #000;
      color: #fff;
      font-size: 15px;
      outline: none;
    }
    button {
      padding: 12px 16px;
      border-radius: 20px;
      border: 1px solid #fff;
      background: #fff;
      color: #000;
      font-size: 15px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<header>
  StriveCore AI
  <button id="emergency">STOP</button>
</header>

<div id="chat">
  <div class="message ai">Hallo ðŸ‘‹ Ich bin <b>StriveCore AI</b>. Schreib mir etwas.</div>
</div>

<footer>
  <input id="input" type="text" placeholder="Nachricht schreibenâ€¦" />
  <button id="send">Senden</button>
</footer>

<script>
// ===== STABILER CORE â€“ SENDEN MUSS GEHEN =====
let emergency = false;

const input = document.getElementById('input');
const sendBtn = document.getElementById('send');
const chat = document.getElementById('chat');
const emergencyBtn = document.getElementById('emergency');

function addMessage(text, type) {
  const div = document.createElement('div');
  div.className = 'message ' + type;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function smartReply(text) {
  const t = text.trim();
  const tl = t.toLowerCase();

  // ðŸ§® MATHE â€“ SEHR GROáºžE ZAHLEN (BigInt)
  // Beispiele: 120+351 | 999999999999+888888888888 | 7*8
  const math = tl.match(/^(\d+)\s*([+\-*/])\s*(\d+)$/);
  if (math) {
    try {
      const a = BigInt(math[1]);
      const b = BigInt(math[3]);
      const op = math[2];
      let r;

      if (op === '+') r = a + b;
      if (op === '-') r = a - b;
      if (op === '*') r = a * b;
      if (op === '/') r = b !== 0n ? a / b : 'Division durch 0';

      return `ðŸ§® ${a.toString()} ${op} ${b.toString()} = ${r.toString()}`;
    } catch {
      return 'âŒ Mathe-Fehler';
    }
  }

  // ðŸŒ SPRACHEGRENZ-NEUTRAL
  if (tl.includes('hallo') || tl.includes('hello'))
    return 'ðŸ‘‹ Hello! I can understand many languages. Try math or ask something simple.';

  if (tl.includes('wer bist') || tl.includes('who are you'))
    return 'ðŸ¤– I am StriveCore AI, a local demo assistant.';

  if (tl.includes('hilfe') || tl.includes('help'))
    return 'ðŸ†˜ I can help with math and basic answers.';

  return 'ðŸ¤– Ich habe dich verstanden. FÃ¼r echtes Weltwissen brauche ich eine Online-KI.';
}


function sendMessage() {
  if (emergency) {
    addMessage('â›” KI gestoppt.', 'ai');
    return;
  }

  const text = input.value.trim();
  if (text === '') return;

  addMessage(text, 'user');
  input.value = '';

  setTimeout(() => {
    addMessage(smartReply(text), 'ai');
  }, 200);
}

// EVENTS
sendBtn.addEventListener('click', sendMessage);
input.addEventListener('keydown', function(e) {
  if (e.key === 'Enter') {
    e.preventDefault();
    sendMessage();
  }
});

emergencyBtn.addEventListener('click', function() {
  emergency = true;
  addMessage('ðŸš¨ EMERGENCY STOP', 'ai');
});

// STRG + G
window.addEventListener('keydown', function(e) {
  if (e.ctrlKey && e.key.toLowerCase() === 'g') {
    emergency = true;
    addMessage('ðŸš¨ EMERGENCY STOP (STRG+G)', 'ai');
  }
});
</script>

</body>
</html>
