<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>StriveCore AI</title>
<style>
body {
  margin:0;
  background:#000;
  color:#fff;
  font-family:Arial;
}
header {
  padding:10px;
  border-bottom:1px solid #333;
}
#chat {
  height:75vh;
  overflow:auto;
  padding:10px;
}
.msg {
  margin:6px 0;
}
.ai { color:#fff; }
.user { color:#aaa; text-align:right; }
input {
  width:80%;
  background:#111;
  color:#fff;
  border:1px solid #333;
}
button {
  background:#222;
  color:#fff;
  border:1px solid #444;
}
#adminMenu {
  position:fixed;
  bottom:20px;
  right:20px;
  background:#111;
  border:1px solid #444;
  padding:10px;
  display:none;
  width:260px;
}
.small {
  font-size:12px;
  color:#aaa;
}
</style>
</head>
<body>

<header>
  <h2>StriveCore AI</h2>
  <div class="small">‚ö†Ô∏è Emergency Mode aktiv ‚Äì System wird √ºberwacht</div>
</header>

<div id="chat"></div>

<div style="padding:10px">
  <input id="input" placeholder="Nachricht‚Ä¶">
  <button onclick="send()">Senden</button>
</div>

<div id="adminMenu">
  <b>STRIVECORE AI ADMIN MEN√ú</b>
  <div class="small" id="adminIP"></div>
  <hr>
  <button onclick="admin('ONLINE')">üü¢ Online</button>
  <button onclick="admin('OFFLINE')">üî¥ Offline</button>
  <hr>
  <input id="banIP" placeholder="IP">
  <input id="banH" placeholder="Std" type="number">
  <button onclick="ban()">Ban</button>
  <hr>
  <b>Logs</b>
  <div id="logs" class="small"></div>
  <hr>
  <b>Warnings</b>
  <div id="warnings" class="small"></div>
</div>

<script>
let chatId = "main";
const chat = document.getElementById("chat");
const adminMenu = document.getElementById("adminMenu");

function add(text, cls) {
  const d = document.createElement("div");
  d.className = "msg " + cls;
  d.textContent = text;
  chat.appendChild(d);
  chat.scrollTop = chat.scrollHeight;
}

async function send(custom=null) {
  const text = custom || input.value;
  input.value = "";
  if (!custom) add(text, "user");

  const res = await fetch("/chat", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ message:text, chatId })
  });

  const data = await res.json();
  add(data.reply, "ai");

  if (data.admin) {
    adminMenu.style.display = "block";
    document.getElementById("adminIP").textContent = "Deine IP: " + data.ip;
    document.getElementById("logs").innerHTML =
      (data.logs||[]).slice(-6).join("<br>");
    document.getElementById("warnings").innerHTML =
      (data.warnings||[]).slice(-6).map(w =>
        `[${w.type}] ${w.ip}`
      ).join("<br>");
  }
}

function admin(type) {
  send(type === "ONLINE" ? "__ADMIN_ONLINE__" : "__ADMIN_OFFLINE__");
}
function ban() {
  send(`__ADMIN_BAN__:${banIP.value}:${banH.value}`);
}

add("Willkommen bei StriveCore AI üëã", "ai");
</script>

</body>
</html>
