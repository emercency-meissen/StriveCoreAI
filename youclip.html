<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>YouClip</title>
<style>
body{margin:0;background:#0b0b0b;color:#fff;font-family:system-ui}
header{padding:12px;background:#111;text-align:center}
.video{padding:12px;border-bottom:1px solid #222}
button{background:#222;color:#fff;border:1px solid #333}
</style>
</head>
<body>

<header>
  <h1>StriveCore AI</h1>
  <a href="/auth/google">
    <button>YouClip</button>
  </a>
</header>


<div id="feed"></div>

<script>
fetch("/me").then(r=>r.json()).then(u=>{
  if(!u) location.href="/auth/google";
});

function load(){
  fetch("/videos").then(r=>r.json()).then(vs=>{
    feed.innerHTML="";
    vs.forEach(v=>{
      const d=document.createElement("div");
      d.className="video";
      d.innerHTML=`
        <b>${v.title}</b><br>
        ${v.creator}<br>
        ‚≠ê ${v.likes}
        <button onclick="like('${v.id}')">Like</button>
      `;
      feed.appendChild(d);
    });
  });
}
function like(id){
  fetch("/videos/like/"+id,{method:"POST"}).then(load);
}
function upload(){
  const t=prompt("Video Titel");
  if(!t)return;
  fetch("/videos/upload",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({title:t})
  }).then(load);
}
load();
</script>
</body>
</html>

